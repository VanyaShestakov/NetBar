function NewsTicker(){let e=this,t=null,n=0;this.tickersStore=[],this.newsStore=[],this.init=function(){t=document.querySelector(".news-ticker"),t&&(e.loadNewTickers(),e.updateTickers())},this.updateTickers=function(){e.tickersStore.length?(e.renderTicker(),setTimeout(e.updateTickers,14e3)):e.loadNextTickers()},this.getTicker=function(){return e.newsStore.length?e.newsStore.shift():e.tickersStore.length?e.tickersStore.shift():void 0},this.loadNextTickers=function(){fetch("/api/get/ticker/next/"+n).then(e=>e.json()).then(t=>{e.tickersStore=t.data||[],n=t.last||0,e.updateTickers()}).catch(e=>{console.error("loadNextTickers",e)})},this.loadNewTickers=function(){setTimeout((function(){fetch("/api/get/ticker/new/0").then(e=>e.json()).then(t=>{e.newsStore=t}).catch(e=>{console.error("loadNewTickers",e)}),e.loadNewTickers()}),6e4)},this.renderTicker=function(){const n=e.getTicker();n&&(t.innerHTML=`\n        <a href="${n.news_link}">\n          <span class="news-ticker-title">${n.news_header}</span>\n          <div class="news-ticker-countdown"></div>\n          <svg class="ticker-circle"><circle r="7" cx="20" cy="20"></circle></svg>\n        </a>\n      `)}}const tickersManager=new NewsTicker;function Loader(){const e=".placeholder-loading-wrapper";this.renderLoader=function(){const e=document.querySelector(".article-text");e&&e.insertAdjacentHTML("beforeend",'<div class="placeholder-loading-wrapper hidden">\n        <div class="placeholder-loading">\n          <div class="placeholder-message-time-container">\n            <div class="placeholder-message-time">\n              <div class="value"></div>\n              <div class="line"></div>\n            </div>\n          </div>\n          <div class="placeholder-message">\n            <div class="placeholder-line-message">\n              <div class="placeholder-line-message-head"></div>\n            </div>\n            <div class="placeholder-picture"></div>\n            <div class="placeholder-subheader">\n              <div class="placeholder-subheader-line"></div>\n              <div class="placeholder-subheader-line"></div>\n              <div class="placeholder-subheader-line"></div>\n              <div class="placeholder-subheader-line"></div>\n            </div>\n          </div>\n        </div>\n      </div>')},this.renderLoaderNews=function(){const e=document.querySelector("#next-article");e&&e.insertAdjacentHTML("beforebegin",'<div class="placeholder-loading-news-wrapper">\n        <div class="placeholder-loading-news">\n          <div class="placeholder-article-header">\n            <div class="placeholder-header-line"></div>\n            <div class="placeholder-header-line"></div>\n          </div>\n          <div class="placeholder-article-sharing-buttons">\n            <div class="placeholder-sharing-buttons-item"></div>\n            <div class="placeholder-sharing-buttons-item"></div>\n            <div class="placeholder-sharing-buttons-item"></div>\n            <div class="placeholder-sharing-buttons-item"></div>\n          </div>\n          <div class="placeholder-article-text">\n            <div class="placeholder-article-text-line"></div>\n            <div class="placeholder-article-text-line"></div>\n            <div class="placeholder-article-text-line"></div>\n            <div class="placeholder-article-text-line"></div>\n          </div>\n        </div>\n      </div>')},this.hideLoader=function(){document.querySelector(e).classList.contains("hidden")||document.querySelector(e).classList.add("hidden")},this.showLoader=function(){document.querySelector(e).classList.contains("hidden")&&document.querySelector(e).classList.remove("hidden")},this.removeLoader=function(){document.querySelector(".placeholder-loading-news-wrapper").remove()}}tickersManager.init();const loaderManager=new Loader;function PagesHandlers(){this.init=function(){e(),t(),c(),i(),a(),r(),s(),window.initGoogleGeo=n,u()};const e=function(){[...document.querySelectorAll(".header-menu .header-menu-item, .error-top-view-container svg")].map(e=>e.addEventListener("click",o,!1));[...document.querySelectorAll("[data-link]:not(.linked)")].map(e=>{const t=e.dataset.linkMode||"";return e.classList.add("linked"),e.addEventListener("click",e=>l(e,t),!1)});[...document.querySelectorAll(".sitemap-content .has-list > .fa, .sitemap-content .has-list > a > .fa")].map(e=>e.addEventListener("click",(function(e){e.currentTarget.closest(".has-list").classList.toggle("active")}),!1));const e=document.querySelector(".dots-container .dots");e&&e.addEventListener("click",(function(){e.parentNode.classList.add("expanded")}),!1)},t=function(){if(window.headerClock){const e=()=>{window.headerClock.innerHTML=(e=>{let t=e.getHours(),n=e.getMinutes();n<10&&(n="0"+n),t<10&&(t="0"+t);return`${e.toLocaleDateString("ru-RU",{month:"long",day:"numeric"})}, ${t}:${n} мск`})(new Date((new Date).getTime()+window.headerClockOffset))};setTimeout((function(){const t=document.querySelector(".status-datetime");window.headerClock=t,window.headerClockOffset=0;const n=t?parseInt(t.dataset.timezone):"";if(!isNaN(n)){const e=60*n+(new Date).getTimezoneOffset();window.headerClockOffset=60*e*1e3}e(),window.headerClockId=setInterval(e,1e4)}),100)}},n=function(){if(!document.querySelector(".main-page-content"))return;console.log("[init location widget]");const e=document.querySelector(".status-weather"),t=e.querySelector(".weather-description"),n=e.querySelector(".weather-temperature"),i=e.querySelector(".weather-location"),a=document.documentElement.clientWidth<=720,s=navigator.userAgent.indexOf("Safari")>=0&&-1===navigator.userAgent.indexOf("Chrome");if(!a){if(s)return e.classList.add("geolocation-denied"),void(e.style.visibility="visible");if(localStorage.getItem("user_location")){const{modified:a,weather:s,city:r,country:o}=JSON.parse(localStorage.getItem("user_location"));if(a>+new Date-108e5)return t.innerHTML=s.weather_descriptions[1]+","||"",n.innerHTML=s.temperature+"°c"||"",r&&o&&(i.querySelector("span").innerHTML=r.long_name+", "+o.long_name),void(e.style.visibility="visible");localStorage.removeItem("user_location")}window.navigator.geolocation?window.navigator.geolocation.getCurrentPosition((function(a){const s={lat:a.coords.latitude,lng:a.coords.longitude};fetch(`/api/get/weather?pos=${s.lat},${s.lng}`).then(e=>e.json()).then(a=>{t.innerHTML=a.weather_descriptions[1]+","||"",n.innerHTML=a.temperature+"°c"||"";(new google.maps.Geocoder).geocode({location:s},([t],n)=>{if("OK"===n){const n=t.address_components.filter(e=>"locality"===e.types[0]).shift(),s=t.address_components.filter(e=>"country"===e.types[0]).shift();n&&s&&(i.querySelector("span").innerHTML=n.long_name+", "+s.long_name),e.style.visibility="visible",localStorage.setItem("user_location",JSON.stringify({modified:+new Date,weather:a,city:n,country:s}))}else console.warn("Geocode was not successful: "+n)})}).catch(e=>{console.warn(e.message)})}),(function(t){console.warn(t.message),e.classList.add("geolocation-denied"),e.style.visibility="visible"})):(e.classList.add("geolocation-denied"),e.style.visibility="visible")}},i=function(){let e=document.querySelector(".news-dossier-columns-wrapper");if(e){console.log("[newsSlider]",!0);new Swiper(e,{slidesPerView:"auto",freeMode:!1,spaceBetween:0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}},a=function(){let e=!1,t=document.querySelector(".primary-photo-tiles-wrapper"),n=document.querySelector(".photo-tiles-wrapper");if(t){const n=1,i=Math.trunc(window.innerWidth/920)+2;let a=new Swiper(t,{slidesPerView:"auto",freeMode:!1,spaceBetween:0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{720:{freeMode:!0}},on:{slideChange:function(s){let r=a.activeIndex,o=t.querySelectorAll(".photo-tile").length||0;if(!e&&o-i<=r){const t=a.slides[a.slides.length-1].dataset.time||0;e=!0,fetch(`/api/get/gallery/next/${t}/${n}`).then(e=>e.json()).then(t=>{for(let e of t)a.appendSlide(`<a class="photo-tile swiper-slide"\n                          href="${e.news_link}"\n                          data-time="${e.news_date_unix}">\n\n                          <img class="tile-cover"\n                               src="${e.news_primary_picture&&e.news_primary_picture.sizes.big?e.news_primary_picture.sizes.big:""}"\n                               alt="${e.news_primary_picture.title}">\n                          <div class="tile-teaser">\n                              <div class="tile-header">${e.news_header}</div>\n                              <div class="tile-description">${e.news_description}</div>\n                          </div>\n\n                      </a>`);o+=t.length||0,e=!1}).catch(t=>{console.error("[getNextPrimaryPhotos]",t),e=!1})}}}})}if(n){const t=0,i=Math.trunc(window.innerWidth/280)+5,a=Math.trunc(Math.ceil(window.innerWidth/280)/2);let r=new Swiper(n,{slidesPerView:"auto",slidesPerGroup:a,loopedSlides:a,freeMode:!1,spaceBetween:0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{720:{freeMode:!0}},on:{slideChange:function(a){let o=r.activeIndex,l=n.querySelectorAll(".photo-tile").length||0;if(!e&&l-i<=o){const n=r.slides[r.slides.length-1].dataset.time||0;e=!0,fetch(`/api/get/gallery/next/${n}/${t}`).then(e=>e.json()).then(t=>{for(let e of t)r.appendSlide(`<a class="photo-tile swiper-slide is-loaded"\n                              href="${e.news_link}"\n                              data-time="${e.news_date_unix}">\n\n                              <img class="tile-cover"\n                                   src="${e.news_primary_picture&&e.news_primary_picture.sizes.big?e.news_primary_picture.sizes.big:""}"\n                                   alt="${e.news_primary_picture.title}"/>\n                              <span class="gradient-cover"></span>\n                              <span class="tile-header">${e.news_header}</span>\n\n                          </a>`);s(),l+=t.length||0,e=!1}).catch(t=>{console.error("[getNextPhotos]",t),e=!1})}}}})}},s=function(){let e=document.querySelectorAll(".photo-tiles-wrapper .photo-tile.is-loaded");const t=new FastAverageColor;for(let n of e)n.classList.remove("is-loaded"),t.getColorAsync(n.querySelector("img"),{algorithm:"simple",defaultColor:[84,68,135,1],silent:!0}).then((function(e){const t=.3*e.value[0]+.59*e.value[1]+.11*e.value[2],i=e.rgba.replace(",1)",",0.95)");n.querySelector(".gradient-cover").style.background="linear-gradient(to bottom, transparent 50%, "+i+" 75%)",n.querySelector(".tile-header").style.color=t<=190?"#fefcfa":"#180701"})).catch((function(e){console.warn(e.message)}));t.destroy()},r=function(){let e=document.querySelector(".books-tiles-wrapper");if(e){console.log("[booksSlider]",!0);new Swiper(e,{slidesPerView:"auto",freeMode:!1,spaceBetween:0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}},o=function(e){if(!e.target.dataset.story)return;document.querySelector("."+e.target.dataset.story).scrollIntoView({behavior:"smooth",block:"start"})},l=function(e,t){const n=e.currentTarget;n.dataset.link&&("blank"===t?window.open(n.dataset.link,"_blank").focus():document.location=n.dataset.link)},c=function(){const e=window.matchMedia("screen and (max-width: 720px)");d(e.matches);try{e.addEventListener("change",e=>{d(e.matches)})}catch(t){try{e.addListener(e=>{d(e.matches)})}catch(e){console.error("toggleMediaQueries",e.message)}}},d=function(e){const t=document.querySelector(".news-story .news-list-column"),n=document.querySelectorAll(".news-story .news-dossier-column");n.forEach(t=>{t.style.maxHeight=e?"300px":"500px",t.querySelectorAll(".article-item").forEach(e=>e.style.display="flex")});const i=(t?t.clientHeight:0)-(e?0:120);n.forEach((function(t){t.style.maxHeight=i+"px";let n=t.querySelector(".news-column-header").clientHeight+(e?48:80)+(e?0:30);t.querySelectorAll(".article-item").forEach((function(t){n+=t.offsetHeight+(e?2:0),t.style.display=n>=i?"none":"flex"}))}))},u=function(){if(!document.querySelector(".article-container .article-text"))return;let e=document.querySelector("meta[name=viewport]");const t=document.querySelector(".article-container .article-text").offsetLeft||0,n=document.documentElement.clientWidth,i=document.documentElement.clientWidth>1400;let a=document.querySelector(".full-width");a&&(a.style.marginLeft=`-${i?t-(n-1400)/2:t}px`,a.style.width=(i?1400:n)+"px",a.style.minWidth=(i?1400:n)+"px"),document.querySelector("html").clientWidth<=720?document.querySelector("html").classList.contains("mobile-view")||(e.setAttribute("content","width=device-width, initial-scale=1.0 maximum-scale=1.0, user-scalable=no"),document.querySelector("html").classList.add("mobile-view")):document.querySelector("html").classList.contains("mobile-view")&&(e.setAttribute("content","width=device-width, initial-scale=1.0"),document.querySelector("html").classList.remove("mobile-view")),setTimeout((function(){u()}),300)}}(()=>{const e=document.querySelector(".navbar-container"),t=document.querySelector(".footer-navbar"),n=document.querySelector(".navbar-close");t&&(t.onclick=()=>{const t=document.documentElement.clientWidth,n=document.documentElement.clientWidth>1400?(t-1400)/2:0;e.style.transform="translateX(0)",e.classList.add("expanded"),e.style.marginLeft=n+"px",document.querySelectorAll(".navbar-news .articles img").forEach((function(e){e.dataset.src&&(e.src=e.dataset.src,e.dataset.src="")}))}),n&&(n.onclick=()=>{e.classList.remove("expanded"),e.style.transform="translateX(-100%)",e.style.marginLeft="0"})})();const pagesHandlers=new PagesHandlers;function Timeline(){const e=this;let t,n,i,a,s,r,o,l,c,d,u=!1,h="";this.init=function(){const e=document.querySelector(".timeline");if(e){if(e.classList.contains("geography")){if(document.location.pathname.indexOf("russian")<=0&&document.location.pathname.indexOf("foreign")<=0)return;h="geography"}else e.classList.contains("author")?h="author":e.classList.contains("presscenter")?h="presscenter":e.classList.contains("search")&&(c=document.querySelector(".search-authors"),d=document.querySelector(".search-regions"),h="search");t=document.querySelector(".next-articles"),t&&""!==h&&(m(),v(),loaderManager.renderLoader())}};const m=function(){document.querySelector(".timeline")&&new Waypoint({element:document.querySelector(".timeline"),handler:async function(t){"down"===t&&await e.getNextArticles()},offset:function(){const e=Waypoint.viewportHeight()-this.element.clientHeight;return document.querySelector("body").classList.contains("mobile-view")?e+300:e+100}})},v=function(){let e=document.querySelectorAll(".photo-article");const t=new FastAverageColor;for(let n of e)t.getColorAsync(n.querySelector("img"),{algorithm:"simple",defaultColor:[84,68,135,1],silent:!0}).then(e=>{const t=.3*e.value[0]+.59*e.value[1]+.11*e.value[2],i=e.rgba.replace(",1)",",0.95)");n.querySelector(".photo-article-gradient-cover").style.background="linear-gradient(to bottom, transparent 50%, "+i+" 75%)",n.querySelector(".photo-article-title-header .photo-author-name").style.color=t<=190?"#fefcfa":"#180701",n.querySelector(".photo-article-title-header h3").style.color=t<=190?"#fefcfa":"#180701"}).catch((function(e){console.warn(e.message)}));t.destroy()};this.getNextArticles=function(){if(t=document.querySelector(".next-articles"),u||t.classList.contains("loaded"))return;u=!0;const e=f(h);loaderManager.showLoader(),fetch(e).then(e=>e.json()).then(e=>{loaderManager.hideLoader(),e&&(p(e),v(),"search"===h?(e.total<15*t.dataset.page&&t.classList.add("loaded"),t.dataset.page=Number(t.dataset.page)+1,e.articles.length&&(t.dataset.time=e.articles[e.articles.length-1].news_date_unix,t.dataset.date=e.articles[e.articles.length-1].news_date_day_month,t.dataset.year=e.articles[e.articles.length-1].news_date_year),e.clearSelectedDate&&history.replaceState({},"","/search"+window.location.search.replace(/date=(.*?)(&|$)/,""))):(t.dataset.time=e[e.length-1].news_date_unix,t.dataset.date=e[e.length-1].news_date_day_month,t.dataset.year=e[e.length-1].news_date_year),setTimeout((function(){u=!1,Waypoint.refreshAll()}),250))}).catch(e=>{console.error("getNextArticles",e)})};const p=function(e){t=document.querySelector(".next-articles");let n=t.dataset.date,i=t.dataset.year;"search"===h&&(g(e),e=e.articles),e.forEach((function(e){const a=i===e.news_date_year?"":`\n        <div class="timeline-message time-separator year-separator">\n          <div class="timeline-message_time-container">\n            <div class="time-column">\n              <div class="time">\n                <div class="value">${e.news_date_year}</div>\n              </div>\n              <div class="line"></div>\n            </div>\n          </div>\n\n          <div class="timeline-message_content">&nbsp;</div>\n        </div>`;i=e.news_date_year;const s=n===e.news_date_day_month?"":`\n        <div class="timeline-message time-separator date-separator">\n          <div class="timeline-message_time-container">\n            <div class="time-column">\n              <div class="time">\n                <div class="value">${e.news_date_day_month}</div>\n              </div>\n              <div class="line"></div>\n            </div>\n          </div>\n          <div class="timeline-message_content">&nbsp;</div>\n        </div>`;n=e.news_date_day_month;const r=e.news_authors&&e.news_authors.length?e.news_authors.map(e=>e.author_title).join(", "):e.authors?e.authors:"";let o="";if(e.is_photoarticle){const t=e.news_primary_picture?`<img class="photo-article-picture" src="${e.news_primary_picture.sizes.big}" alt="">`:"";o=`\n          <a class="photo-article" href="${e.news_link}">\n            <div class="photo-article-title-header">\n              <div class="photo-author-name">${r}</div>\n              <h3>${e.news_header}</h3>\n            </div>\n            ${t}\n            <div class="photo-article-gradient-cover"></div>\n           </a>`}else{const t=e.news_primary_picture?`<img class="picture" src="${e.news_primary_picture.sizes.small}" alt="">`:"";o=`\n        <div class="timeline-message_content">\n          <h3><a href="${e.news_link}">${e.news_header}</a></h3>\n          <div class="author-name">${r}</div>\n          ${t}\n          <div class="subheader">${e.news_short_body}</div>\n        </div>`}t.insertAdjacentHTML("beforebegin",`\n        ${a}\n        ${s}\n        <div class="timeline-message">\n          <div class="timeline-message_time-container">\n            <div class="time-column">\n              <div class="time">\n                <div class="value time-value">\n                  ${e.news_time_text}\n                </div>\n                <div class="value date-value">\n                  ${e.news_date_day_month}\n                </div>\n                <div class="value year-value">\n                  ${e.news_date_year}\n                </div>\n              </div>\n              <div class="line"></div>\n            </div>\n          </div>\n          ${o}\n        </div>\n      `)}))},g=function(e){e.authors.length&&(c.innerHTML='<div class="search-category-header">Авторы</div>',e.authors.forEach((function(e,t){c.insertAdjacentHTML("beforeend",`\n          <a class="author-item${t>9?" hidden":""}" href="${e.author_link}">\n            <div class="author-photo" itemprop="logo">\n              <img itemprop="url contentUrl" alt="" src="${e.author_photo}">\n            </div>\n            <div class="author-about">\n              <div class="author-name" itemprop="name">\n                ${e.author_title}\n              </div>\n              <div class="author-post" itemprop="name">автор</div>\n            </div>\n          </a>`)})),c.insertAdjacentHTML("beforeend",`<div class="search-category-show-list">${e.authorsCountString}</div>`)),e.regions.length&&(d.innerHTML='<div class="search-category-header">Регионы</div>',e.regions.forEach((function(e,t){d.insertAdjacentHTML("beforeend",`\n          <a class="region-item${t>9?" hidden":""}" href="${e.region_link}">\n            ${e.region_title}\n          </a>\n        `)})),d.insertAdjacentHTML("beforeend",`<div class="search-category-show-list">${e.regionsCountString}</div>`)),document.querySelector(".search-count").innerHTML=e.totalString,document.querySelector(".timeline-header").innerHTML=0===e.total?"По Вашему запросу ничего не найдено":"Материалы",document.querySelector(".timeline-header").classList.toggle("zero-result",0===e.total),search.addSearchCategoryHandlers()},f=function(e){return n=t.dataset.time,"geography"===e?(i=t.dataset.russian,a=t.dataset.federal,s=t.dataset.district,r=t.dataset.region,o=t.dataset.city,`/api/get/geography/${i}/${a}/${s}/${r}/${o}/${n}`):"author"===e?(l=t.dataset.author,`/api/get/authors/next/${l}/${n}`):"presscenter"===e?"/api/get/presscenter/next/"+n:"search"===e?search.getSearchUrl():void 0}}pagesHandlers.init();const timelineManager=new Timeline;function analyticsSliders(){const e=Math.trunc(window.innerWidth/240)+6;let t=!1;const n=Math.trunc(Math.ceil(window.innerWidth/240)/2);let i=document.querySelector(".more-analytics-container");if(i){let a=new Swiper(i,{slidesPerView:"auto",slidesPerGroup:n,loopedSlides:n,freeMode:!1,spaceBetween:0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{720:{freeMode:!0}},on:{slideChange:function(n){let s=a.activeIndex,r=i.querySelectorAll(".more-analytics").length||0;if(!t&&r-e<=s){const e=a.slides[a.slides.length-1].dataset.time||0;t=!0,fetch("/api/get/analytics/next/"+e).then(e=>e.json()).then(e=>{for(let t of e)a.appendSlide(`<a href="${t.news_link}" class="more-analytics is-loaded swiper-slide"\n\t\t\t\t\t\t\t\t\t\t\tdata-time="${t.news_date_unix}">\n\t\t\t\t\t\t\t\t\t\t\t<img src="${t.news_primary_picture?t.news_primary_picture.sizes.big:""}"\n\t\t\t\t\t\t\t\t\t\t\t     alt="${t.news_primary_picture.title}"/>\n\t\t\t\t\t\t\t\t\t\t\t<span class="gradient-cover"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span class="more-analytics-header">${t.news_header}</span>\n\t\t\t\t\t\t\t\t\t\t</a>`);moreAnalyticsGradient(),r+=e.length||0,t=!1}).catch(e=>{console.error("[getNextArticle]",e),t=!1})}}}})}}function moreAnalyticsGradient(){const e=new FastAverageColor,t=document.querySelectorAll(".more-analytics.is-loaded");for(let n of t)n.classList.remove("is-loaded"),e.getColorAsync(n.querySelector("img"),{algorithm:"simple",defaultColor:[84,68,135,1],silent:!0}).then((function(e){const t=.3*e.value[0]+.59*e.value[1]+.11*e.value[2],i=e.rgba.replace(",1)",",0.95)");n.querySelector(".gradient-cover").style.background="linear-gradient(to bottom, transparent 50%, "+i+" 75%)",n.querySelector(".more-analytics-header").style.color=t<=190?"#fefcfa":"#180701"})).catch((function(e){console.warn(e.message)}));e.destroy()}function ArticleTranslation(){const e=this;let t,n,i=!1;this.init=function(){n=document.querySelector(".translation-content"),n&&(t=n.querySelector(".translation-container"),a(),loaderManager.renderLoader())},this.getNextArticles=function(){const t=document.getElementById("next-translation-article");if(!t||i)return;const n=t.dataset.id,a=t.dataset.time;i=!0,loaderManager.showLoader(),fetch(`/api/get/translation/next/${n}/${a}`).then(e=>e.json()).then(a=>{loaderManager.hideLoader(),a&&a.length&&(e.renderMessages(a),s(),t.dataset.id=n,t.dataset.time=a[a.length-1].date_unix,t.dataset.date=a[a.length-1].date_text,setTimeout((function(){i=!1,Waypoint.refreshAll()}),250))}).catch(e=>{console.error("getNextArticleTranslation",e)})},this.renderMessages=function(e){const t=document.getElementById("next-translation-article"),n=t.dataset.leadTime;let i=t.dataset.date,a="";for(let s of e){if(s.date_unix.toString()===n)continue;document.createElement("div").classList.add("translation-message"),i!==s.date_text?(i=s.date_text,a=`\n          <div class="translation-message date-separator">\n            <div class="translation-message_time-container">\n              <div class="time-column">\n                <div class="time date">${i}</div>\n                <div class="line"></div>\n              </div>\n            </div>\n            <div class="translation-message_content">&nbsp;</div>\n          </div>`):a="",t.insertAdjacentHTML("beforebegin",`\n          ${a}\n          <div class="translation-message">\n            <div class="translation-message_time-container">\n              <div class="time-column">\n                <div class="time">\n                  <div class="value">${s.time_text}</div>\n                </div>\n                <div class="line"></div>\n              </div>\n            </div>\n            <div class="translation-message_content">${s.message}</div>\n          </div>\n        `)}};const a=function(){n&&new Waypoint({element:n,handler:function(t){"down"===t&&e.getNextArticles()},offset:function(){const e=Waypoint.viewportHeight()-this.element.clientHeight;return document.querySelector("body").classList.contains(".mobile-view")?e+300:e+100}})},s=function(){document.querySelectorAll(".translation-message img.lazy-load").forEach((function(e){new Waypoint({element:e,handler:function(){e.src=e.dataset.src,e.classList.remove("lazy-load"),this.destroy()},offset:function(){const e=Waypoint.viewportHeight()-this.element.clientHeight;return document.querySelector("body").classList.contains(".mobile-view")?e+300:e+100}})}))}}timelineManager.init(),moreAnalyticsGradient(),analyticsSliders();const articleTranslationManager=new ArticleTranslation;articleTranslationManager.init();